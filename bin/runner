#!/usr/bin/env bash
set -euo pipefail

# -------- Helpers (source-only) --------
COLOR_HIGHLIGHT='\033[1;35m'
NO_COLOR='\033[0m'

run () {
  func=$1
  shift
  if [[ $(type -t $func || true) == function ]]; then
    print_func "${func}"
    $func "$@"
  else
    echo "Unknown command: ${func}"
    exit 1
  fi
}

shell () {
  if [[ -z ${1-} ]]; then
    echo "Error: \`shell\` called with no arguments"
    exit 1
  fi

  print_cmd "$@"
  "$@"
}

print_func () {
  echo -e "${COLOR_HIGHLIGHT}--> $@()${NO_COLOR}"
}

print_cmd () {
  echo -e "${COLOR_HIGHLIGHT}----> $@${NO_COLOR}"
}

in_test_env () {
  # shell CARGO_TARGET_DIR=target/subdir
  run_targets "$@"
}

# Note: This file deliberately defines helpers only.
# Source it from bin/* command scripts and call: run your_func_name
